{{#partial "header"}}
  <nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="/">
      <img src="/assets/images/brand.svg" width="50" height="30" class="d-inline-block align-top" alt="SVG Brand">
      <span class="pl-2">Hack-A-Thon</span>
    </a>

    <ul class="nav nav-pills">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/teams">Teams</a>
      </li>
    </ul>
  </nav>
{{/partial}}

{{#partial "main"}}
  <div class="row">
    <div class="col">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                  <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-teamName" role="tab" aria-controls="nav-teamName" aria-selected="true">Statistics</a>
                  <a class="nav-item nav-link" id="nav-members-tab" data-toggle="tab" href="#nav-members" role="tab" aria-controls="nav-members" aria-selected="false">Members</a>
                  <a class="nav-item nav-link" id="nav-settings-tab" data-toggle="tab" href="#nav-settings" role="tab" aria-controls="nav-settings" aria-selected="false">Settings</a>
                </div>
              </nav>
              <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="nav-teamName" role="tabpanel" aria-labelledby="nav-home-tab">
                  <div class="card card-team">
                    <div class="card-body">
                      <!--<h4 class="card-title">Statistics</h4>-->
                      <div class="row">
                        <div class="col">
                          <table class="table">
                            <thead class="thead-light">
                              <tr>
                                <th scope="col">#</th>
                                <th scope="col">Name</th>
                                <th scope="col">Description</th>
                                <th scope="col">Team Size</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <th scope="row">{{ team.id }}</th>
                                <td>{{ team.stringName }}</td>
                                <td>
                                  {{#unless team.stringDescription }}
                                    <a id="addDesc" class="btn btn-info">Add Description</a>
                                  {{/unless}}
                                  {{ team.stringDescription }}
                                </td>
                                <td>{{ team.teamSize }}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="nav-members" role="tabpanel" aria-labelledby="nav-members-tab">
                  <div class="card card-team">
                    <div class="card-body">
                      <h4 class="card-title">Team Members</h4>
                      {{#if members}}
                        {{#each members}}
                          GetAllMembers
                          {{ stringFirstName }}
                        {{/each}}
                      {{else}}
                        <div class="jumbotron">
                          <h1 class="team-member">No Members yet</h1>
                          <p class="lead">Please add a member.</p>
                          <a class="btn btn-info btn-sm" href="/teams/{{ team.id }}/member/new" role="button">+Team Member</a>
                        </div>
                      {{/if}}
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="nav-settings" role="tabpanel" aria-labelledby="nav-settings-tab">
                  <script>

                  </script>
                  <div class="card card-team">
                    <div class="card-body">
                      <h4 class="card-title">Settings</h4>
                      <div class="row">
                        <div class="col-8">
                          <form action="/teams/{{team.id}}/update" method="post">
                            <div class="form-group">
                              <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text" id="teamName-addon">Team Name</span>
                                </div>
                                <input type="text" id="teamName" name="teamName"  class="form-control" value="{{team.stringName}}" aria-label="Team Name" aria-describedby="teamName-addon">
                              </div>
                            </div>
                            <div class="form-group">
                              <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <span class="input-group-text" id="teamDesc-addon">Team Description</span>
                                </div>
                                <input type="text" id="teamDesc" name="teamDesc" class="form-control" value="{{team.stringDescription}}" aria-label="Team Description" aria-describedby="teamDesc-addon">
                              </div>
                            </div>
                            <button type="submit" class="btn btn-info">Update Settings</button>
                          </form>
                        </div>
                        <div class="col-4"></div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{{/partial}}

{{#partial "scripts"}}
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
  <script>
    $('#addDesc').click(function() {
        $('#nav-settings-tab').tab('show');
        setTimeout(function(){
          window.location.href = "/teams/{{team.id}}#teamDesc";
        }, 500);
    });
  </script>
{{/partial}}

{{> layout.hbs}}